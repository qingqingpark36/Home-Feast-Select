<!-- pages/menu/menu.wxml -->
<view class="container menu-container">
  <!-- åˆ†ç±»å¯¼èˆª -->
  <view class="category-nav">
    <scroll-view scroll-x class="category-scroll">
      <view class="category-list">
        <view
          class="category-item {{currentCategory === '' ? 'active' : ''}}"
          bindtap="selectCategory"
          data-category="">
          å…¨éƒ¨
        </view>
        <view
          wx:for="{{categories}}"
          wx:key="id"
          class="category-item {{currentCategory === item.id ? 'active' : ''}}"
          bindtap="selectCategory"
          data-category="{{item.id}}">
          {{item.icon}} {{item.name}}
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- èœå“åˆ—è¡¨ -->
  <view class="dish-list">
    <view wx:if="{{loading}}" class="loading">åŠ è½½ä¸­...</view>

    <view wx:elif="{{filteredDishes.length === 0}}" class="empty-state">
      <text>æš‚æ— èœå“</text>
    </view>

    <view wx:else class="dish-grid">
      <view
        wx:for="{{filteredDishes}}"
        wx:key="_id"
        class="dish-card"
        bindtap="showDishDetail"
        data-dish="{{item}}">
        <!-- èœå“å›¾ç‰‡ -->
        <view class="dish-image-wrapper">
          <image
            class="dish-image"
            src="{{item.image || '/images/default-dish.png'}}"
            mode="aspectFill">
          </image>
        </view>

        <!-- èœå“ä¿¡æ¯ -->
        <view class="dish-info">
          <view class="dish-name">{{item.name}}</view>
          <view class="dish-category">{{getCategoryName(item.category)}}</view>
        </view>

        <!-- æ·»åŠ æŒ‰é’® -->
        <view class="dish-action">
          <button class="add-btn" catchtap="addToCart" data-dish="{{item}}">
            + åŠ å…¥
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- è´­ç‰©è½¦æŒ‰é’® -->
  <view class="cart-float-btn" bindtap="goToCart">
    <view class="cart-icon">ğŸ›’</view>
    <view wx:if="{{cartCount > 0}}" class="cart-badge">{{cartCount}}</view>
  </view>
</view>
