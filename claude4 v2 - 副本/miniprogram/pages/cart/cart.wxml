<!-- pages/cart/cart.wxml -->
<view class="container cart-container">
  <!-- è´­ç‰©è½¦åˆ—è¡¨ -->
  <view wx:if="{{cart.length === 0}}" class="empty-cart">
    <view class="empty-icon">ğŸ›’</view>
    <view class="empty-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</view>
    <button class="go-menu-btn" bindtap="goToMenu">å»ç‚¹é¤</button>
  </view>

  <view wx:else>
    <!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨ -->
    <view class="cart-list">
      <view wx:for="{{cart}}" wx:key="_id" class="cart-item">
        <!-- å•†å“å›¾ç‰‡ -->
        <view class="item-image-wrapper">
          <image
            class="item-image"
            src="{{item.image || '/images/default-dish.png'}}"
            mode="aspectFill">
          </image>
        </view>

        <!-- å•†å“ä¿¡æ¯ -->
        <view class="item-info">
          <view class="item-name">{{item.name}}</view>
          <view class="item-category">{{getCategoryName(item.category)}}</view>
        </view>

        <!-- æ•°é‡æ§åˆ¶ -->
        <view class="item-quantity">
          <view class="quantity-btn" bindtap="decreaseCount" data-id="{{item._id}}">-</view>
          <view class="quantity-num">{{item.count}}</view>
          <view class="quantity-btn" bindtap="increaseCount" data-id="{{item._id}}">+</view>
        </view>
      </view>
    </view>

    <!-- å¤‡æ³¨ -->
    <view class="notes-section card">
      <view class="section-title">å¤‡æ³¨ä¿¡æ¯</view>
      <textarea
        class="notes-input"
        placeholder="è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰"
        value="{{notes}}"
        bindinput="onNotesInput"
        maxlength="200">
      </textarea>
    </view>

    <!-- åº•éƒ¨æ“ä½œæ  -->
    <view class="cart-footer">
      <view class="footer-info">
        <view class="total-label">å…± {{totalCount}} é“èœ</view>
      </view>
      <button class="submit-btn" bindtap="submitOrder">æäº¤è®¢å•</button>
    </view>
  </view>
</view>
